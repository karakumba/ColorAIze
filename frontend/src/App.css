/* Единый шрифт */
@import url("https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&display=swap");

:root{
  --bg:#0a0f14; --bg-soft:#0e1520;
  --text:#e9eef6; --muted:#9fb0c4;
  --a1:#2bd3ff; --a2:#7cff6e; /* cyan → neo-lime */
  --stroke:#ffffff22; --r:20px;

  /* ФИКСИРОВАННЫЕ размеры области с фото */
  --stage-w: 720px;
  --stage-h: 480px; /* соотношение 3:2 */
}

*{box-sizing:border-box; font-family:inherit}
html,body,#root{height:100%}
body{
  margin:0; color:var(--text);
  font-family: "Inter", -apple-system, system-ui, Segoe UI, Roboto, Helvetica, Arial;
  background: radial-gradient(1100px 700px at 18% -10%, var(--bg-soft), transparent 65%), var(--bg);
  overflow-x:hidden;
}
.page{min-height:100vh; display:flex; flex-direction:column}
.container{min-height:100vh; display:flex; flex-direction:column; width:100%; max-width:980px; margin:0 auto; padding:0 24px}
.main{flex:1}

/* фон под стеклом */
.bg-grid{
  position:fixed; inset:0; pointer-events:none; opacity:.14;
  background:
    radial-gradient(1px 1px at 20px 20px, #ffffff22 99%, transparent 101%) 0 0/40px 40px,
    linear-gradient(90deg, transparent 0 49%, #ffffff10 50%, transparent 51%) 0 0/120px 120px,
    linear-gradient(0deg,  transparent 0 49%, #ffffff10 50%, transparent 51%) 0 0/120px 120px;
  mask-image: radial-gradient(1200px 800px at 50% -200px, #000 35%, transparent 70%);
}
.orbs{position:fixed; inset:0; pointer-events:none; filter: blur(50px) saturate(140%); opacity:.30}
.orb{position:absolute; width:420px; height:420px; border-radius:999px; background: radial-gradient(circle at 30% 30%, var(--a1), transparent 60%)}
.orb-b{left:60%; top:10%; background: radial-gradient(circle at 30% 30%, var(--a2), transparent 60%)}
.orb-c{left:20%; top:60%; background: radial-gradient(circle at 60% 40%, #6aa5ff, transparent 60%)}

/* header */
.hdr{height:72px; display:flex; align-items:center; justify-content:space-between}
.brand{display:flex; align-items:center; gap:10px; font-weight:800; letter-spacing:.2px}
.logo-dot{width:10px; height:10px; border-radius:999px; background:linear-gradient(135deg,var(--a1),var(--a2))}

/* hero */
.hero{text-align:center; margin:36px 0 14px}
.hero-title{margin:0 0 8px; font-size:clamp(30px,5vw,46px); line-height:1.1; font-weight:900; letter-spacing:-.2px}
.sub{color:var(--muted); margin:0}

/* стеклянная карточка */
.card{
  position:relative;
  margin:24px auto 0;
  width:100%; max-width: calc(var(--stage-w) + 56px); /* паддинги 28*2 */
  padding:28px;
  border-radius:var(--r); border:1px solid var(--stroke);
  background: rgba(255,255,255,.06);
  backdrop-filter: blur(16px) saturate(160%);
  -webkit-backdrop-filter: blur(16px) saturate(160%);
  box-shadow: 0 20px 60px rgba(0,0,0,.40), inset 0 1px 0 rgba(255,255,255,.04);
  overflow:hidden;
  max-height: 500px;
}

/* неоновая кромка + внутренний блик */
.glass-border{position:absolute; inset:0; pointer-events:none}
.glass-border::before{
  content:""; position:absolute; inset:-1px; border-radius:calc(var(--r) + 1px);
  background: linear-gradient(130deg, color-mix(in srgb, var(--a1) 42%, transparent), transparent 40%, color-mix(in srgb, var(--a2) 42%, transparent));
  mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite: xor; mask-composite: exclude;
  padding:1px; opacity:.45;
}
.glass-border::after{
  content:""; position:absolute; inset:0; border-radius:var(--r);
  background: radial-gradient(120% 60% at 50% -20%, rgba(255,255,255,.08), transparent 60%);
}

/* стеклянная колонка внутри карточки */
.stack{display:flex; flex-direction:column; align-items:center; gap:16px}

/* FIXED STAGE — одинаковые размеры для drop-зоны и превью */
.stage{
  width: var(--stage-w);
  height: 350px;
  margin: 0 auto;
  display:grid; place-items:center;
  overflow:hidden;
}
.stage-img{
  max-width:350px; max-height:350px; object-fit:contain; display:block;
}

/* dnd-поведение для stage в режиме drop */
.dropzone{ border-style:dashed; border-width:1px;
  background: rgba(255,255,255,.04);
  transition: border-color .2s, background .2s;
  cursor:pointer;
  color: #868686;
  border-radius: 12px;
}
.dropzone.drop-hover{ border-color: color-mix(in srgb, var(--a1) 60%, #fff 0%); background: rgba(255,255,255,.06) }

/* графика drop */
.dz-graphic{ position:relative; width:120px; height:120px; border-radius:24px;
  background: radial-gradient(80px 80px at 35% 30%, rgba(255,255,255,.08), transparent 60%),
              linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
  border:1px solid #ffffff22; display:grid; place-items:center;
}

/* кнопки */
.actions{ display:flex; justify-content:center; }
.row{display:flex; gap:10px; justify-content:center; flex-wrap:wrap; margin-top:12px}
.btn{
  border-radius:12px; padding:10px 14px; font-weight:700; cursor:pointer;
  border:1px solid #ffffff24; background:transparent; color:var(--text);
  transition: background .2s, border-color .2s, filter .15s;
}
.btn:hover{ background:#ffffff12; border-color:#ffffff40 }
.btn:disabled{ opacity:.6; cursor:not-allowed }
.btn.primary{ background: linear-gradient(135deg, var(--a1), var(--a2)); color:#071019; border:none; }
.btn.primary:hover{ filter:brightness(1.06) }
.btn.secondary{}

/* прогресс */
.progress{
  width: var(--stage-w);
  margin:8px auto 0; position:relative; height:10px;
  background:#0f1b2a; border:1px solid #ffffff22; border-radius:999px;
}
.progress .bar{
  position:absolute; left:0; top:0; bottom:0; width:0%;
  background: linear-gradient(90deg, var(--a1), var(--a2));
  border-radius:999px;
}
.progress span{display:block; margin-top:6px; font-size:12px; color:var(--muted); text-align:center}

/* ошибки */
.error{margin-top:12px; color:#ffd5d5; background:#ff5d5d18; border:1px solid #ff5d5d40; padding:8px 10px; border-radius:10px}

/* результат (можно оставить адаптивным) */
.result{ margin:24px 0 0; display:flex; flex-direction:column; align-items:center; gap:14px}
.ba{ position:relative; width:100%; max-width:920px; aspect-ratio:16/10; border:1px solid #ffffff22; border-radius:16px; background:#0b1017; overflow:hidden }
.ba-img{ position:absolute; inset:0; width:100%; height:100%; object-fit:contain }
.ba-clip{ position:absolute; inset:0; overflow:hidden }
.ba-range{
  position:absolute; left:0; right:0; bottom:12px; width:min(660px,80%); margin:0 auto;
  appearance:none; height:4px; background:#243248; border-radius:999px;
}
.ba-range::-webkit-slider-thumb{
  appearance:none; width:18px; height:18px; border-radius:999px; border:2px solid #0a1017;
  background: linear-gradient(135deg, var(--a1), var(--a2));
}

/* лоадер */
.loading{display:flex; flex-direction:column; align-items:center; gap:10px}
.spinner{ width:28px; height:28px; border-radius:999px; border:3px solid #1f2a36; border-top-color:var(--a1); animation:spin 1s linear infinite }
@keyframes spin{to{ transform: rotate(360deg) }}
.load-hint{color:var(--muted)}

/* футер */
.ftr{
  margin-top:auto; height:64px;
  display:flex; align-items:center; justify-content:center;
  color:var(--muted); border-top:1px solid #ffffff14;
}

/* доступность */
.sr-only{
  position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden;
  clip:rect(0,0,0,0); white-space:nowrap; border:0;
}

/* RESPONSIVE: на мобильных уменьшаем stage, сохраняя соотношение 3:2 */
@media (max-width: 820px){
  :root{
    --stage-w: 92vw;
    --stage-h: calc(92vw * 2 / 3);
  }
  .card{ max-width: calc(var(--stage-w) + 56px);}
}